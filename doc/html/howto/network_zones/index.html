<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<meta property="og:title" content="How to configure network zones" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://linuxcontainers.org/lxd/docs/stable-5.0/howto/network_zones/" />
<meta property="og:site_name" content="LXD documentation" />
<meta property="og:description" content="Network zones can be used to serve DNS records for LXD networks. You can use network zones to automatically maintain valid forward and reverse records for all your instances. This can be useful if ..." />
<meta property="og:image" content="https://linuxcontainers.org/static/img/containers.png" />
<meta property="og:image:alt" content="LXD documentation" />
<meta name="description" content="Network zones can be used to serve DNS records for LXD networks. You can use network zones to automatically maintain valid forward and reverse records for all your instances. This can be useful if ..." />
<link rel="index" title="Index" href="../../genindex/" /><link rel="search" title="Search" href="../../search/" /><link rel="next" title="How to configure LXD as a BGP server" href="../network_bgp/" /><link rel="prev" title="How to configure network forwards" href="../network_forwards/" />

    <link rel="shortcut icon" href="../../_static/favicon.ico"/><!-- Generated with Sphinx 5.3.0 and Furo 2022.12.07 -->
        <title>How to configure network zones - LXD documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?digest=91d0f0d1c444bdcb17a68e833c7a53903343c195" />
    <link rel="stylesheet" type="text/css" href="../../_static/youtube.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/related-links.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --font-stack: Ubuntu, -apple-system, Segoe UI, Roboto, Oxygen, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;
  --font-stack--monospace: Ubuntu Mono, Consolas, Monaco, Courier, monospace;
  --color-foreground-primary: #111;
  --color-foreground-secondary: var(--color-foreground-primary);
  --color-foreground-muted: #333;
  --color-background-secondary: #FFF;
  --color-background-hover: #f2f2f2;
  --color-brand-primary: #111;
  --color-brand-content: #06C;
  --color-api-background: #cdcdcd;
  --color-inline-code-background: rgba(0,0,0,.03);
  --color-sidebar-link-text: #111;
  --color-sidebar-item-background--current: #ebebeb;
  --color-sidebar-item-background--hover: #f2f2f2;
  --toc-font-size: var(--font-size--small);
  --color-admonition-title-background--note: var(--color-background-primary);
  --color-admonition-title-background--tip: var(--color-background-primary);
  --color-admonition-title-background--important: var(--color-background-primary);
  --color-admonition-title-background--caution: var(--color-background-primary);
  --color-admonition-title--note: #24598F;
  --color-admonition-title--tip: #24598F;
  --color-admonition-title--important: #C7162B;
  --color-admonition-title--caution: #F99B11;
  --color-highlighted-background: #EbEbEb;
  --color-link-underline: var(--color-background-primary);
  --color-link-underline--hover: var(--color-background-primary);
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-foreground-secondary: var(--color-foreground-primary);
  --color-foreground-muted: #CDCDCD;
  --color-background-secondary: var(--color-background-primary);
  --color-background-hover: #666;
  --color-brand-primary: #fff;
  --color-brand-content: #06C;
  --color-sidebar-link-text: #f7f7f7;
  --color-sidebar-item-background--current: #666;
  --color-sidebar-item-background--hover: #333;
  --color-admonition-background: transparent;
  --color-admonition-title-background--note: var(--color-background-primary);
  --color-admonition-title-background--tip: var(--color-background-primary);
  --color-admonition-title-background--important: var(--color-background-primary);
  --color-admonition-title-background--caution: var(--color-background-primary);
  --color-admonition-title--note: #24598F;
  --color-admonition-title--tip: #24598F;
  --color-admonition-title--important: #C7162B;
  --color-admonition-title--caution: #F99B11;
  --color-highlighted-background: #666;
  --color-link-underline: var(--color-background-primary);
  --color-link-underline--hover: var(--color-background-primary);
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-foreground-secondary: var(--color-foreground-primary);
  --color-foreground-muted: #CDCDCD;
  --color-background-secondary: var(--color-background-primary);
  --color-background-hover: #666;
  --color-brand-primary: #fff;
  --color-brand-content: #06C;
  --color-sidebar-link-text: #f7f7f7;
  --color-sidebar-item-background--current: #666;
  --color-sidebar-item-background--hover: #333;
  --color-admonition-background: transparent;
  --color-admonition-title-background--note: var(--color-background-primary);
  --color-admonition-title-background--tip: var(--color-background-primary);
  --color-admonition-title-background--important: var(--color-background-primary);
  --color-admonition-title-background--caution: var(--color-background-primary);
  --color-admonition-title--note: #24598F;
  --color-admonition-title--tip: #24598F;
  --color-admonition-title--important: #C7162B;
  --color-admonition-title--caution: #F99B11;
  --color-highlighted-background: #666;
  --color-link-underline: var(--color-background-primary);
  --color-link-underline--hover: var(--color-background-primary);
  
      }
    }
  }
</style></head>
  <body>
    <header id="header" class="p-navigation">

  <style>
    .p-navigation {
      border-bottom: 1px solid var(--color-sidebar-background-border);
    }

    .p-navigation__nav {
      display: flex;
    }

    ul.p-navigation__links {
      display: flex;
      list-style: none;
      margin-left: 0;
      margin-top: auto;
      margin-bottom: auto;
      max-width: 800px;
      width: 100%;
    }

    ul.p-navigation__links li {
      margin: 0 auto;
      text-align: center;
      width: 100%;
    }

    ul.p-navigation__links li a {
      background-color: rgba(0, 0, 0, 0);
      border: none;
      border-radius: 0;
      color: var(--color-sidebar-link-text);
      display: block;
      font-weight: 400;
      line-height: 1.5rem;
      margin: 0;
      overflow: hidden;
      padding: 1rem 0;
      position: relative;
      text-align: left;
      text-overflow: ellipsis;
      transition-duration: .1s;
      transition-property: background-color, color, opacity;
      transition-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);
      white-space: nowrap;
      width: 100%;
    }

    ul.p-navigation__links .p-navigation__link,
    ul.p-navigation__links .p-navigation__logo {
      text-align: center;
    }

    ul.p-navigation__links .p-navigation__link:hover,
    ul.p-navigation__links .p-dropdown__link:hover {
      background-color: var(--color-sidebar-item-background--hover);
    }

    ul.p-navigation__links .p-navigation__sub-link {
      background: var(--color-background-primary);
      padding: .5rem 0 .5rem .5rem;
      font-weight: 300;
    }

    ul.p-navigation__links .more-links-dropdown li a {
      border-left: 1px solid var(--color-sidebar-background-border);
      border-right: 1px solid var(--color-sidebar-background-border);
    }

    ul.p-navigation__links .more-links-dropdown li:first-child a {
      border-top: 1px solid var(--color-sidebar-background-border);
    }

    ul.p-navigation__links .more-links-dropdown li:last-child a {
      border-bottom: 1px solid var(--color-sidebar-background-border);
    }

    ul.p-navigation__links .p-navigation__logo {
      padding: 0.5rem;
    }

    ul.p-navigation__links .p-navigation__logo img {
      width: 40px;
    }

    ul.more-links-dropdown {
      display: none;
      overflow-x: visible;
      height: 0;
      z-index: 55;
      padding: 0;
      position: relative;
      list-style: none;
      margin-bottom: 0;
      margin-top: 0;
    }

    ul.p-navigation__links li:first-child {
      width: 130px;
    }

    @media only screen and (min-width: 800px) {
      .nav-more-links::after {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16'%3E%3Cpath fill='%23111' d='M8.187 11.748l6.187-6.187-1.06-1.061-5.127 5.127L3.061 4.5 2 5.561z'/%3E%3C/svg%3E");
        background-position: center;
        background-repeat: no-repeat;
        background-size: contain;
        content: "";
        display: block;
        height: 1rem;
        pointer-events: none;
        position: absolute;
        right: 1rem;
        text-indent: calc(100% + 10rem);
        top: calc(1rem + 0.25rem);
        width: 1rem;
      }

      body[data-theme=dark] .nav-more-links::after {
        background-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='16' height='16'><path stroke='white' fill='white' d='M8.187 11.748l6.187-6.187-1.06-1.061-5.127 5.127L3.061 4.5 2 5.561z'/></svg>");
      }

      ul.p-navigation__links li:first-child {
        width: 100%;
      }
    }

    @media only screen and (min-width: 1310px) {
      ul.p-navigation__links {
        margin-left: calc(50% - 41em);
      }
    }

  </style>

  <div class="p-navigation__nav" role="menubar">

    <ul class="p-navigation__links" role="menu">

      <li>
        <a class="p-navigation__logo" href="/">
          <img src="../../_static/download/containers.small.png" alt="Linux containers logo" border="0" />
        </a>
      </li>

      <li>
        <a href="/" class="p-navigation__link">Home</a>
      </li>

      <li>
        <a href="/lxd/try-it/" class="p-navigation__link">Demo</a>
      </li>


      <li>
        <a href="#" class="p-navigation__link nav-more-links">More resources</a>
        <ul class="more-links-dropdown">
          <li>
            <a href="/lxd/introduction/" class="p-navigation__sub-link p-dropdown__link">Introduction</a>
          </li>

          <li>
            <a href="/lxd/news/" class="p-navigation__sub-link p-dropdown__link">News</a>
          </li>

          <li>
            <a href="/lxd/getting-started-cli/" class="p-navigation__sub-link is-selected p-dropdown__link">Getting started</a>
          </li>

          <li>
            <a href="/lxd/third-party-integrations/" class="p-navigation__sub-link p-dropdown__link">Third-party integrations</a>
          </li>

          <li>
            <a href="/lxd/advanced-guide/" class="p-navigation__sub-link p-dropdown__link">Advanced guide</a>
          </li>

          <li>
            <a href="https://discuss.linuxcontainers.org" class="p-navigation__sub-link p-dropdown__link">Forum</a>
          </li>

          <li>
            <a href="https://github.com/lxc/lxd" class="p-navigation__sub-link p-dropdown__link">GitHub</a>
          </li>

        </ul>
      </li>

    </ul>
  </div>
</header>
   
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../"><div class="brand">LXD  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><div class="version_dropdown">
  Doc version: <button onclick="dropdown()" class="version_select" id="current"></button>
  <div id="all-versions" class="available_versions"></div>
</div><form class="sidebar-search-container" method="get" action="../../search/" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../">LXD</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../getting_started/">Getting started</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../requirements/">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../installing/">Install LXD</a></li>
<li class="toctree-l2"><a class="reference internal" href="../initialize/">Initialize LXD</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq/">Frequently asked</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/">Contributing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../support/">Support</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../security/">Security</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../explanation/security/">About security</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../authentication/">Remote API authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="../server_expose/">Expose LXD to the network</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../instances/">Instances</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../explanation/instances/">About instances</a></li>
<li class="toctree-l2"><a class="reference internal" href="../instances_create/">Create instances</a></li>
<li class="toctree-l2"><a class="reference internal" href="../instances_manage/">Manage instances</a></li>
<li class="toctree-l2"><a class="reference internal" href="../instances_configure/">Configure instances</a></li>
<li class="toctree-l2"><a class="reference internal" href="../instances_snapshots/">Create snapshots</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../profiles/">Use profiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../instance-exec/">Run commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../instances_console/">Access the console</a></li>
<li class="toctree-l2"><a class="reference internal" href="../instances_access_files/">Access files</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../explanation/instance_config/">Instance configuration</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../reference/instance_properties/">Instance properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/instance_options/">Instance options</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../reference/devices/">Devices</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../reference/standard_devices/">Standard devices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/devices_none/">Type: <code class="docutils literal notranslate"><span class="pre">none</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/devices_nic/">Type: <code class="docutils literal notranslate"><span class="pre">nic</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/devices_disk/">Type: <code class="docutils literal notranslate"><span class="pre">disk</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/devices_unix_char/">Type: <code class="docutils literal notranslate"><span class="pre">unix-char</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/devices_unix_block/">Type: <code class="docutils literal notranslate"><span class="pre">unix-block</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/devices_usb/">Type: <code class="docutils literal notranslate"><span class="pre">usb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/devices_gpu/">Type: <code class="docutils literal notranslate"><span class="pre">gpu</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/devices_infiniband/">Type: <code class="docutils literal notranslate"><span class="pre">infiniband</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/devices_proxy/">Type: <code class="docutils literal notranslate"><span class="pre">proxy</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/devices_unix_hotplug/">Type: <code class="docutils literal notranslate"><span class="pre">unix-hotplug</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/devices_tpm/">Type: <code class="docutils literal notranslate"><span class="pre">tpm</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/devices_pci/">Type: <code class="docutils literal notranslate"><span class="pre">pci</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/instance_units/">Units for storage and network limits</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../images/">Images</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../architectures/">Architectures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cloud-init/">Cloud-init</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../image-handling/">Handling</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../storage/">Storage</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../explanation/storage/">About storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../storage_pools/">Manage pools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../storage_create_instance/">Create an instance in a pool</a></li>
<li class="toctree-l2"><a class="reference internal" href="../storage_volumes/">Manage volumes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../storage_move_volume/">Move or copy a volume</a></li>
<li class="toctree-l2"><a class="reference internal" href="../storage_backup_volume/">Back up a volume</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../reference/storage_drivers/">Storage drivers</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../reference/storage_dir/">Directory - <code class="docutils literal notranslate"><span class="pre">dir</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/storage_btrfs/">Btrfs - <code class="docutils literal notranslate"><span class="pre">btrfs</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/storage_lvm/">LVM - <code class="docutils literal notranslate"><span class="pre">lvm</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/storage_zfs/">ZFS - <code class="docutils literal notranslate"><span class="pre">zfs</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/storage_ceph/">Ceph RBD - <code class="docutils literal notranslate"><span class="pre">ceph</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/storage_cephfs/">CephFS - <code class="docutils literal notranslate"><span class="pre">cephfs</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../../networks/">Networking</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../explanation/networks/">About networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../network_create/">Create and configure a network</a></li>
<li class="toctree-l2"><a class="reference internal" href="../network_acls/">Configure network ACLs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../network_forwards/">Configure network forwards</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Configure network zones</a></li>
<li class="toctree-l2"><a class="reference internal" href="../network_bgp/">Configure LXD as BGP server</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../reference/network_bridge/">Bridge network</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../network_bridge_resolved/">Integrate with resolved</a></li>
<li class="toctree-l3"><a class="reference internal" href="../network_bridge_firewalld/">Configure your firewall</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../reference/network_ovn/">OVN network</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../network_ovn_setup/">Set up OVN</a></li>
<li class="toctree-l3"><a class="reference internal" href="../network_ovn_peers/">Create routing relationships</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../reference/network_external/">External networks</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../reference/network_macvlan/">Macvlan network</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/network_sriov/">SR-IOV network</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/network_physical/">Physical network</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../clustering/">Clustering</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../explanation/clustering/">About clustering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_form/">Form a cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_manage/">Manage a cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_recover/">Recover a cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_manage_instance/">Manage instances</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_config_storage/">Configure storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_config_networks/">Configure networks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_groups/">Set up cluster groups</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/cluster_member_config/">Cluster member configuration</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../operation/">Manage LXD</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../server/">Server configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/">Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../remotes/">Remotes</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../explanation/performance_tuning/">Performance tuning</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../benchmark_performance/">Benchmark performance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../network_increase_bandwidth/">Increase bandwidth</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/server_settings/">Server settings</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../backup/">Backups</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../migration/">Migration</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../move_instances/">Move instances</a></li>
<li class="toctree-l3"><a class="reference internal" href="../import_machines_to_instances/">Import existing machines</a></li>
<li class="toctree-l3"><a class="reference internal" href="../migrate_from_lxc/">Migrate from LXC</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../restapi_landing/">REST API</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../rest-api/">Main API documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/">Main API specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api-extensions/">Main API extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dev-lxd/">Instance API documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../events/">Events API documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../metrics/">Metrics API documentation</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../internals/">Internals &amp; debugging</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../container-environment/">Container environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daemon-behavior/">Daemon behavior</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../database/">Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../debugging/">Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../environment/">Environment variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../syscall-interception/">System call interception</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../userns-idmap/">User namespace setup</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../external_resources/">External resources</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://github.com/lxc/lxd">Project repository</a></li>
<li class="toctree-l2"><a class="reference external" href="https://images.linuxcontainers.org">Image server</a></li>
</ul>
</li>
</ul>

</div></div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="how-to-configure-network-zones">
<span id="network-zones"></span><h1>How to configure network zones<a class="headerlink" href="#how-to-configure-network-zones" title="Permalink to this heading">#</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Network zones are available for the <a class="reference internal" href="../../reference/network_ovn/#network-ovn"><span class="std std-ref">OVN network</span></a> and the <a class="reference internal" href="../../reference/network_bridge/#network-bridge"><span class="std std-ref">Bridge network</span></a>.</p>
</div>
         <p class="youtube_link">           <a href="https://www.youtube.com/watch?v=2MqpJOogNVQ" target="_blank">             <span title="LXD network zones - YouTube" class="play_icon">▶</span>             <span title="LXD network zones - YouTube">Watch on YouTube</span>           </a>         </p><p>Network zones can be used to serve DNS records for LXD networks.</p>
<p>You can use network zones to automatically maintain valid forward and reverse records for all your instances.
This can be useful if you are operating a LXD cluster with multiple instances across many networks.</p>
<p>Having DNS records for each instance makes it easier to access network services running on an instance.
It is also important when hosting, for example, an outbound SMTP service.
Without correct forward and reverse DNS entries for the instance, sent mail might be flagged as potential spam.</p>
<p>Each network can be related to up to three zones for:</p>
<ul class="simple">
<li><p>Forward DNS records</p></li>
<li><p>IPv4 reverse DNS records</p></li>
<li><p>IPv6 reverse DNS records</p></li>
</ul>
<p>LXD will then automatically manage forward and reverse records for all instances, network gateways and downstream network ports and serve those zones for zone transfer to the operator’s production DNS servers.</p>
<section id="generated-records">
<h2>Generated records<a class="headerlink" href="#generated-records" title="Permalink to this heading">#</a></h2>
<p>For example, if you configure a zone for forward DNS records for <code class="docutils literal notranslate"><span class="pre">lxd.example.net</span></code> for your network, it generates records that resolve the following DNS names:</p>
<ul class="simple">
<li><p>For all instances in the network: <code class="docutils literal notranslate"><span class="pre">&lt;instance_name&gt;.lxd.example.net</span></code></p></li>
<li><p>For the network gateway: <code class="docutils literal notranslate"><span class="pre">&lt;network_name&gt;.gw.lxd.example.net</span></code></p></li>
<li><p>For downstream network ports (for network zones set on an uplink network with a downstream OVN network): <code class="docutils literal notranslate"><span class="pre">&lt;project_name&gt;-&lt;downstream_network_name&gt;.uplink.lxd.example.net</span></code></p></li>
</ul>
<p>You can check the records that are generated with your zone setup with the <code class="docutils literal notranslate"><span class="pre">dig</span></code> command.
For example, running <code class="docutils literal notranslate"><span class="pre">dig</span> <span class="pre">&#64;&lt;DNS_server_IP&gt;</span> <span class="pre">-p</span> <span class="pre">1053</span> <span class="pre">axfr</span> <span class="pre">lxd.example.net</span></code> might give the following output:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>lxd.example.net.<span class="w">              </span><span class="m">3600</span><span class="w">  </span>IN<span class="w">  </span>SOA<span class="w"> </span>lxd.example.net.<span class="w"> </span>hostmaster.lxd.example.net.<span class="w"> </span><span class="m">1648118965</span><span class="w"> </span><span class="m">120</span><span class="w"> </span><span class="m">60</span><span class="w"> </span><span class="m">86400</span><span class="w"> </span><span class="m">30</span>
default-my-ovn.uplink.lxd.example.net.<span class="w"> </span><span class="m">300</span><span class="w"> </span>IN<span class="w"> </span>A<span class="w"> </span><span class="m">192</span>.0.2.100
my-instance.lxd.example.net.<span class="w">  </span><span class="m">300</span><span class="w">   </span>IN<span class="w">  </span>A<span class="w">   </span><span class="m">192</span>.0.2.76
my-uplink.gw.lxd.example.net.<span class="w"> </span><span class="m">300</span><span class="w">   </span>IN<span class="w">  </span>A<span class="w">   </span><span class="m">192</span>.0.2.1
foo.lxd.example.net.<span class="w">          </span><span class="m">300</span><span class="w">   </span>IN<span class="w">  </span>A<span class="w">   </span><span class="m">8</span>.8.8.8
lxd.example.net.<span class="w">              </span><span class="m">3600</span><span class="w">  </span>IN<span class="w">  </span>SOA<span class="w"> </span>lxd.example.net.<span class="w"> </span>hostmaster.lxd.example.net.<span class="w"> </span><span class="m">1648118965</span><span class="w"> </span><span class="m">120</span><span class="w"> </span><span class="m">60</span><span class="w"> </span><span class="m">86400</span><span class="w"> </span><span class="m">30</span>
</pre></div>
</div>
<p>If you configure a zone for IPv4 reverse DNS records for <code class="docutils literal notranslate"><span class="pre">2.0.192.in-addr.arpa</span></code> for a network using <code class="docutils literal notranslate"><span class="pre">192.0.2.0/24</span></code>, it generates reverse DNS records for, for example, <code class="docutils literal notranslate"><span class="pre">192.0.2.100</span></code>.</p>
</section>
<section id="enable-the-built-in-dns-server">
<h2>Enable the built-in DNS server<a class="headerlink" href="#enable-the-built-in-dns-server" title="Permalink to this heading">#</a></h2>
<p>To make use of network zones, you must enable the built-in DNS server.</p>
<p>To do so, set the <code class="docutils literal notranslate"><span class="pre">core.dns_address</span></code> configuration option (see <a class="reference internal" href="../../server/#server-options-core"><span class="std std-ref">Core configuration</span></a>) to a local address on the LXD server.
This is the address on which the DNS server will listen.
Note that in a LXD cluster, the address may be different on each cluster member.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The built-in DNS server supports only zone transfers through AXFR.
It cannot be directly queried for DNS records.
Therefore, the built-in DNS server must be used in combination with an external DNS server (<code class="docutils literal notranslate"><span class="pre">bind9</span></code>, <code class="docutils literal notranslate"><span class="pre">nsd</span></code>, …), which will transfer the entire zone from LXD, refresh it upon expiry and provide authoritative answers to DNS requests.</p>
<p>Authentication for zone transfers is configured on a per-zone basis, with peers defined in the zone configuration and a combination of IP address matching and TSIG-key based authentication.</p>
</div>
</section>
<section id="create-and-configure-a-network-zone">
<h2>Create and configure a network zone<a class="headerlink" href="#create-and-configure-a-network-zone" title="Permalink to this heading">#</a></h2>
<p>Use the following command to create a network zone:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>lxc<span class="w"> </span>network<span class="w"> </span>zone<span class="w"> </span>create<span class="w"> </span>&lt;network_zone&gt;<span class="w"> </span><span class="o">[</span>configuration_options...<span class="o">]</span>
</pre></div>
</div>
<p>The following examples show how to configure a zone for forward DNS records, one for IPv4 reverse DNS records and one for IPv6 reverse DNS records, respectively:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>lxc<span class="w"> </span>network<span class="w"> </span>zone<span class="w"> </span>create<span class="w"> </span>lxd.example.net
lxc<span class="w"> </span>network<span class="w"> </span>zone<span class="w"> </span>create<span class="w"> </span><span class="m">2</span>.0.192.in-addr.arpa
lxc<span class="w"> </span>network<span class="w"> </span>zone<span class="w"> </span>create<span class="w"> </span><span class="m">1</span>.0.0.0.1.0.0.0.8.b.d.0.1.0.0.2.ip6.arpa
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Zones must be globally unique, even across projects.
If you get a creation error, it might be due to the zone already existing in another project.</p>
</div>
<p>You can either specify the configuration options when you create the network or configure them afterwards with the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>lxc<span class="w"> </span>network<span class="w"> </span>zone<span class="w"> </span><span class="nb">set</span><span class="w"> </span>&lt;network_zone&gt;<span class="w"> </span>&lt;key&gt;<span class="o">=</span>&lt;value&gt;
</pre></div>
</div>
<p>Use the following command to edit a network zone in YAML format:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>lxc<span class="w"> </span>network<span class="w"> </span>zone<span class="w"> </span>edit<span class="w"> </span>&lt;network_zone&gt;
</pre></div>
</div>
<section id="configuration-options">
<h3>Configuration options<a class="headerlink" href="#configuration-options" title="Permalink to this heading">#</a></h3>
<p>The following configuration options are available for network zones:</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Key</p></th>
<th class="head text-left"><p>Type</p></th>
<th class="head text-left"><p>Required</p></th>
<th class="head"><p>Default</p></th>
<th class="head text-left"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">peers.NAME.address</span></code></p></td>
<td class="text-left"><p>string</p></td>
<td class="text-left"><p>no</p></td>
<td><p>-</p></td>
<td class="text-left"><p>IP address of a DNS server</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">peers.NAME.key</span></code></p></td>
<td class="text-left"><p>string</p></td>
<td class="text-left"><p>no</p></td>
<td><p>-</p></td>
<td class="text-left"><p>TSIG key for the server</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">dns.nameservers</span></code></p></td>
<td class="text-left"><p>string set</p></td>
<td class="text-left"><p>no</p></td>
<td><p>-</p></td>
<td class="text-left"><p>Comma-separated list of DNS server FQDNs (for NS records)</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">network.nat</span></code></p></td>
<td class="text-left"><p>bool</p></td>
<td class="text-left"><p>no</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td class="text-left"><p>Whether to generate records for NAT-ed subnets</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">user.*</span></code></p></td>
<td class="text-left"><p>*</p></td>
<td class="text-left"><p>no</p></td>
<td><p>-</p></td>
<td class="text-left"><p>User-provided free-form key/value pairs</p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
<section id="add-a-network-zone-to-a-network">
<h2>Add a network zone to a network<a class="headerlink" href="#add-a-network-zone-to-a-network" title="Permalink to this heading">#</a></h2>
<p>To add a zone to a network, set the corresponding configuration option in the network configuration:</p>
<ul class="simple">
<li><p>For forward DNS records: <code class="docutils literal notranslate"><span class="pre">dns.zone.forward</span></code></p></li>
<li><p>For IPv4 reverse DNS records: <code class="docutils literal notranslate"><span class="pre">dns.zone.reverse.ipv4</span></code></p></li>
<li><p>For IPv6 reverse DNS records: <code class="docutils literal notranslate"><span class="pre">dns.zone.reverse.ipv6</span></code></p></li>
</ul>
<p>For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>lxc<span class="w"> </span>network<span class="w"> </span><span class="nb">set</span><span class="w"> </span>&lt;network_name&gt;<span class="w"> </span>dns.zone.forward<span class="o">=</span><span class="s2">&quot;lxd.example.net&quot;</span>
</pre></div>
</div>
<p>Zones belong to projects and are tied to the <code class="docutils literal notranslate"><span class="pre">networks</span></code> features of projects.
You can restrict projects to specific domains and sub-domains through the <code class="docutils literal notranslate"><span class="pre">restricted.networks.zones</span></code> project configuration key.</p>
</section>
<section id="add-custom-records">
<h2>Add custom records<a class="headerlink" href="#add-custom-records" title="Permalink to this heading">#</a></h2>
<p>A network zone automatically generates forward and reverse records for all instances, network gateways and downstream network ports.
If required, you can manually add custom records to a zone.</p>
<p>To do so, use the <code class="docutils literal notranslate"><span class="pre">lxc</span> <span class="pre">network</span> <span class="pre">zone</span> <span class="pre">record</span></code> command.</p>
<section id="create-a-record">
<h3>Create a record<a class="headerlink" href="#create-a-record" title="Permalink to this heading">#</a></h3>
<p>Use the following command to create a record:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>lxc<span class="w"> </span>network<span class="w"> </span>zone<span class="w"> </span>record<span class="w"> </span>create<span class="w"> </span>&lt;network_zone&gt;<span class="w"> </span>&lt;record_name&gt;
</pre></div>
</div>
<p>This command creates an empty record without entries and adds it to a network zone.</p>
<section id="record-properties">
<h4>Record properties<a class="headerlink" href="#record-properties" title="Permalink to this heading">#</a></h4>
<p>Records have the following properties:</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Property</p></th>
<th class="head text-left"><p>Type</p></th>
<th class="head text-left"><p>Required</p></th>
<th class="head text-left"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td class="text-left"><p>string</p></td>
<td class="text-left"><p>yes</p></td>
<td class="text-left"><p>Unique name of the record</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">description</span></code></p></td>
<td class="text-left"><p>string</p></td>
<td class="text-left"><p>no</p></td>
<td class="text-left"><p>Description of the record</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">entries</span></code></p></td>
<td class="text-left"><p>entry list</p></td>
<td class="text-left"><p>no</p></td>
<td class="text-left"><p>A list of DNS entries</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">config</span></code></p></td>
<td class="text-left"><p>string set</p></td>
<td class="text-left"><p>no</p></td>
<td class="text-left"><p>Configuration options as key/value pairs (only <code class="docutils literal notranslate"><span class="pre">user.*</span></code> custom keys supported)</p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
<section id="add-or-remove-entries">
<h3>Add or remove entries<a class="headerlink" href="#add-or-remove-entries" title="Permalink to this heading">#</a></h3>
<p>To add an entry to the record, use the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>lxc<span class="w"> </span>network<span class="w"> </span>zone<span class="w"> </span>record<span class="w"> </span>entry<span class="w"> </span>add<span class="w"> </span>&lt;network_zone&gt;<span class="w"> </span>&lt;record_name&gt;<span class="w"> </span>&lt;type&gt;<span class="w"> </span>&lt;value&gt;<span class="w"> </span><span class="o">[</span>--ttl<span class="w"> </span>&lt;TTL&gt;<span class="o">]</span>
</pre></div>
</div>
<p>This command adds a DNS entry with the specified type and value to the record.</p>
<p>For example, to create a dual-stack web server, add a record with two entries similar to the following:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>lxc<span class="w"> </span>network<span class="w"> </span>zone<span class="w"> </span>record<span class="w"> </span>entry<span class="w"> </span>add<span class="w"> </span>&lt;network_zone&gt;<span class="w"> </span>&lt;record_name&gt;<span class="w"> </span>A<span class="w"> </span><span class="m">1</span>.2.3.4
lxc<span class="w"> </span>network<span class="w"> </span>zone<span class="w"> </span>record<span class="w"> </span>entry<span class="w"> </span>add<span class="w"> </span>&lt;network_zone&gt;<span class="w"> </span>&lt;record_name&gt;<span class="w"> </span>AAAA<span class="w"> </span><span class="m">1234</span>::1234
</pre></div>
</div>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">--ttl</span></code> flag to set a custom time-to-live (in seconds) for the entry.
Otherwise, the default of 300 seconds is used.</p>
<p>You cannot edit an entry (except if you edit the full record with <code class="docutils literal notranslate"><span class="pre">lxc</span> <span class="pre">network</span> <span class="pre">zone</span> <span class="pre">record</span> <span class="pre">edit</span></code>), but you can delete entries with the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>lxc<span class="w"> </span>network<span class="w"> </span>zone<span class="w"> </span>record<span class="w"> </span>entry<span class="w"> </span>remove<span class="w"> </span>&lt;network_zone&gt;<span class="w"> </span>&lt;record_name&gt;<span class="w"> </span>&lt;type&gt;<span class="w"> </span>&lt;value&gt;
</pre></div>
</div>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
   

<div class="related-pages">
  <a class="next-page" href="../network_bgp/">
      <div class="page-info">
        <div class="context">
          <span>Next</span>
        </div>
        <div class="title">How to configure LXD as a BGP server</div>
      </div>
      <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
    </a>
  <a class="prev-page" href="../network_forwards/">
      <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
      <div class="page-info">
        <div class="context">
          <span>Previous</span>
        </div>
        
        <div class="title">How to configure network forwards</div>
        
      </div>
    </a>
</div>
<div class="bottom-of-page">
  <div class="left-details">
    <div class="copyright">
        Copyright &#169; 2014-2023 LXD contributors
    </div>

    <div class="last-updated">
      Last updated on Jan 16, 2023</div>
  </div>
  <div class="right-details">

    
    <div class="show-source">
      <a class="muted-link" href="../../_sources/howto/network_zones.md.txt"
         rel="nofollow">Show source</a>
    </div>
    
    <div class="edit-github">
      <a class="muted-link" href="https://github.com/lxc/lxd/edit/master/doc/howto/network_zones.md">Edit on GitHub</a>
    </div>
    

    </div>
  </div>
</div>

      </footer>
    </div>
    <aside class="toc-drawer">
      
<div class="toc-sticky toc-scroll">
   
    <div class="toc-title-container">
      <span class="toc-title">
       Contents
      </span>
    </div>
    <div class="toc-tree-container">
      <div class="toc-tree">
        <ul>
<li><a class="reference internal" href="#">How to configure network zones</a><ul>
<li><a class="reference internal" href="#generated-records">Generated records</a></li>
<li><a class="reference internal" href="#enable-the-built-in-dns-server">Enable the built-in DNS server</a></li>
<li><a class="reference internal" href="#create-and-configure-a-network-zone">Create and configure a network zone</a><ul>
<li><a class="reference internal" href="#configuration-options">Configuration options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#add-a-network-zone-to-a-network">Add a network zone to a network</a></li>
<li><a class="reference internal" href="#add-custom-records">Add custom records</a><ul>
<li><a class="reference internal" href="#create-a-record">Create a record</a><ul>
<li><a class="reference internal" href="#record-properties">Record properties</a></li>
</ul>
</li>
<li><a class="reference internal" href="#add-or-remove-entries">Add or remove entries</a></li>
</ul>
</li>
</ul>
</li>
</ul>

      </div>
    </div>
   
    
    <div class="relatedlinks-title-container">
      <span class="relatedlinks-title">
       Related links
      </span>
    </div>
    <div class="relatedlinks-container">
      <div class="relatedlinks">
        
          <ul><li><a href="https://discuss.linuxcontainers.org/t/12033" target="_blank">[LXD] Built-in DNS server</a></li><li><a href="https://discuss.linuxcontainers.org/t/13128" target="_blank">[LXD] Custom DNS records in network zones</a></li></ul>
        
        
      </div>
    </div>
    
  </div>

    </aside>
  </div>
</div><script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/scripts/furo.js"></script>
    <script src="../../_static/header-nav.js"></script>
    <script src="../../_static/version-switcher.js"></script>
    </body>
</html>