<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<meta property="og:title" content="How to configure network ACLs" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://linuxcontainers.org/lxd/docs/stable-5.0/howto/network_acls/" />
<meta property="og:site_name" content="LXD documentation" />
<meta property="og:description" content="Network ACLs define traffic rules that allow controlling network access between different instances connected to the same network, and access to and from other networks. Network ACLs can be assigne..." />
<meta property="og:image" content="https://linuxcontainers.org/static/img/containers.png" />
<meta property="og:image:alt" content="LXD documentation" />
<meta name="description" content="Network ACLs define traffic rules that allow controlling network access between different instances connected to the same network, and access to and from other networks. Network ACLs can be assigne..." />
<link rel="index" title="Index" href="../../genindex/" /><link rel="search" title="Search" href="../../search/" /><link rel="next" title="How to configure network forwards" href="../network_forwards/" /><link rel="prev" title="How to create and configure a network" href="../network_create/" />

    <link rel="shortcut icon" href="../../_static/favicon.ico"/><!-- Generated with Sphinx 5.3.0 and Furo 2022.12.07 -->
        <title>How to configure network ACLs - LXD documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?digest=91d0f0d1c444bdcb17a68e833c7a53903343c195" />
    <link rel="stylesheet" type="text/css" href="../../_static/youtube.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/related-links.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --font-stack: Ubuntu, -apple-system, Segoe UI, Roboto, Oxygen, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;
  --font-stack--monospace: Ubuntu Mono, Consolas, Monaco, Courier, monospace;
  --color-foreground-primary: #111;
  --color-foreground-secondary: var(--color-foreground-primary);
  --color-foreground-muted: #333;
  --color-background-secondary: #FFF;
  --color-background-hover: #f2f2f2;
  --color-brand-primary: #111;
  --color-brand-content: #06C;
  --color-api-background: #cdcdcd;
  --color-inline-code-background: rgba(0,0,0,.03);
  --color-sidebar-link-text: #111;
  --color-sidebar-item-background--current: #ebebeb;
  --color-sidebar-item-background--hover: #f2f2f2;
  --toc-font-size: var(--font-size--small);
  --color-admonition-title-background--note: var(--color-background-primary);
  --color-admonition-title-background--tip: var(--color-background-primary);
  --color-admonition-title-background--important: var(--color-background-primary);
  --color-admonition-title-background--caution: var(--color-background-primary);
  --color-admonition-title--note: #24598F;
  --color-admonition-title--tip: #24598F;
  --color-admonition-title--important: #C7162B;
  --color-admonition-title--caution: #F99B11;
  --color-highlighted-background: #EbEbEb;
  --color-link-underline: var(--color-background-primary);
  --color-link-underline--hover: var(--color-background-primary);
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-foreground-secondary: var(--color-foreground-primary);
  --color-foreground-muted: #CDCDCD;
  --color-background-secondary: var(--color-background-primary);
  --color-background-hover: #666;
  --color-brand-primary: #fff;
  --color-brand-content: #06C;
  --color-sidebar-link-text: #f7f7f7;
  --color-sidebar-item-background--current: #666;
  --color-sidebar-item-background--hover: #333;
  --color-admonition-background: transparent;
  --color-admonition-title-background--note: var(--color-background-primary);
  --color-admonition-title-background--tip: var(--color-background-primary);
  --color-admonition-title-background--important: var(--color-background-primary);
  --color-admonition-title-background--caution: var(--color-background-primary);
  --color-admonition-title--note: #24598F;
  --color-admonition-title--tip: #24598F;
  --color-admonition-title--important: #C7162B;
  --color-admonition-title--caution: #F99B11;
  --color-highlighted-background: #666;
  --color-link-underline: var(--color-background-primary);
  --color-link-underline--hover: var(--color-background-primary);
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-foreground-secondary: var(--color-foreground-primary);
  --color-foreground-muted: #CDCDCD;
  --color-background-secondary: var(--color-background-primary);
  --color-background-hover: #666;
  --color-brand-primary: #fff;
  --color-brand-content: #06C;
  --color-sidebar-link-text: #f7f7f7;
  --color-sidebar-item-background--current: #666;
  --color-sidebar-item-background--hover: #333;
  --color-admonition-background: transparent;
  --color-admonition-title-background--note: var(--color-background-primary);
  --color-admonition-title-background--tip: var(--color-background-primary);
  --color-admonition-title-background--important: var(--color-background-primary);
  --color-admonition-title-background--caution: var(--color-background-primary);
  --color-admonition-title--note: #24598F;
  --color-admonition-title--tip: #24598F;
  --color-admonition-title--important: #C7162B;
  --color-admonition-title--caution: #F99B11;
  --color-highlighted-background: #666;
  --color-link-underline: var(--color-background-primary);
  --color-link-underline--hover: var(--color-background-primary);
  
      }
    }
  }
</style></head>
  <body>
    <header id="header" class="p-navigation">

  <style>
    .p-navigation {
      border-bottom: 1px solid var(--color-sidebar-background-border);
    }

    .p-navigation__nav {
      display: flex;
    }

    ul.p-navigation__links {
      display: flex;
      list-style: none;
      margin-left: 0;
      margin-top: auto;
      margin-bottom: auto;
      max-width: 800px;
      width: 100%;
    }

    ul.p-navigation__links li {
      margin: 0 auto;
      text-align: center;
      width: 100%;
    }

    ul.p-navigation__links li a {
      background-color: rgba(0, 0, 0, 0);
      border: none;
      border-radius: 0;
      color: var(--color-sidebar-link-text);
      display: block;
      font-weight: 400;
      line-height: 1.5rem;
      margin: 0;
      overflow: hidden;
      padding: 1rem 0;
      position: relative;
      text-align: left;
      text-overflow: ellipsis;
      transition-duration: .1s;
      transition-property: background-color, color, opacity;
      transition-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);
      white-space: nowrap;
      width: 100%;
    }

    ul.p-navigation__links .p-navigation__link,
    ul.p-navigation__links .p-navigation__logo {
      text-align: center;
    }

    ul.p-navigation__links .p-navigation__link:hover,
    ul.p-navigation__links .p-dropdown__link:hover {
      background-color: var(--color-sidebar-item-background--hover);
    }

    ul.p-navigation__links .p-navigation__sub-link {
      background: var(--color-background-primary);
      padding: .5rem 0 .5rem .5rem;
      font-weight: 300;
    }

    ul.p-navigation__links .more-links-dropdown li a {
      border-left: 1px solid var(--color-sidebar-background-border);
      border-right: 1px solid var(--color-sidebar-background-border);
    }

    ul.p-navigation__links .more-links-dropdown li:first-child a {
      border-top: 1px solid var(--color-sidebar-background-border);
    }

    ul.p-navigation__links .more-links-dropdown li:last-child a {
      border-bottom: 1px solid var(--color-sidebar-background-border);
    }

    ul.p-navigation__links .p-navigation__logo {
      padding: 0.5rem;
    }

    ul.p-navigation__links .p-navigation__logo img {
      width: 40px;
    }

    ul.more-links-dropdown {
      display: none;
      overflow-x: visible;
      height: 0;
      z-index: 55;
      padding: 0;
      position: relative;
      list-style: none;
      margin-bottom: 0;
      margin-top: 0;
    }

    ul.p-navigation__links li:first-child {
      width: 130px;
    }

    @media only screen and (min-width: 800px) {
      .nav-more-links::after {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16'%3E%3Cpath fill='%23111' d='M8.187 11.748l6.187-6.187-1.06-1.061-5.127 5.127L3.061 4.5 2 5.561z'/%3E%3C/svg%3E");
        background-position: center;
        background-repeat: no-repeat;
        background-size: contain;
        content: "";
        display: block;
        height: 1rem;
        pointer-events: none;
        position: absolute;
        right: 1rem;
        text-indent: calc(100% + 10rem);
        top: calc(1rem + 0.25rem);
        width: 1rem;
      }

      body[data-theme=dark] .nav-more-links::after {
        background-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='16' height='16'><path stroke='white' fill='white' d='M8.187 11.748l6.187-6.187-1.06-1.061-5.127 5.127L3.061 4.5 2 5.561z'/></svg>");
      }

      ul.p-navigation__links li:first-child {
        width: 100%;
      }
    }

    @media only screen and (min-width: 1310px) {
      ul.p-navigation__links {
        margin-left: calc(50% - 41em);
      }
    }

  </style>

  <div class="p-navigation__nav" role="menubar">

    <ul class="p-navigation__links" role="menu">

      <li>
        <a class="p-navigation__logo" href="/">
          <img src="../../_static/download/containers.small.png" alt="Linux containers logo" border="0" />
        </a>
      </li>

      <li>
        <a href="/" class="p-navigation__link">Home</a>
      </li>

      <li>
        <a href="/lxd/try-it/" class="p-navigation__link">Demo</a>
      </li>


      <li>
        <a href="#" class="p-navigation__link nav-more-links">More resources</a>
        <ul class="more-links-dropdown">
          <li>
            <a href="/lxd/introduction/" class="p-navigation__sub-link p-dropdown__link">Introduction</a>
          </li>

          <li>
            <a href="/lxd/news/" class="p-navigation__sub-link p-dropdown__link">News</a>
          </li>

          <li>
            <a href="/lxd/getting-started-cli/" class="p-navigation__sub-link is-selected p-dropdown__link">Getting started</a>
          </li>

          <li>
            <a href="/lxd/third-party-integrations/" class="p-navigation__sub-link p-dropdown__link">Third-party integrations</a>
          </li>

          <li>
            <a href="/lxd/advanced-guide/" class="p-navigation__sub-link p-dropdown__link">Advanced guide</a>
          </li>

          <li>
            <a href="https://discuss.linuxcontainers.org" class="p-navigation__sub-link p-dropdown__link">Forum</a>
          </li>

          <li>
            <a href="https://github.com/lxc/lxd" class="p-navigation__sub-link p-dropdown__link">GitHub</a>
          </li>

        </ul>
      </li>

    </ul>
  </div>
</header>
   
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../"><div class="brand">LXD  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><div class="version_dropdown">
  Doc version: <button onclick="dropdown()" class="version_select" id="current"></button>
  <div id="all-versions" class="available_versions"></div>
</div><form class="sidebar-search-container" method="get" action="../../search/" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../">LXD</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../getting_started/">Getting started</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../requirements/">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../installing/">Install LXD</a></li>
<li class="toctree-l2"><a class="reference internal" href="../initialize/">Initialize LXD</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../faq/">Frequently asked</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/">Contributing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../support/">Support</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../security/">Security</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../explanation/security/">About security</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../authentication/">Remote API authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="../server_expose/">Expose LXD to the network</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../instances/">Instances</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../explanation/instances/">About instances</a></li>
<li class="toctree-l2"><a class="reference internal" href="../instances_create/">Create instances</a></li>
<li class="toctree-l2"><a class="reference internal" href="../instances_manage/">Manage instances</a></li>
<li class="toctree-l2"><a class="reference internal" href="../instances_configure/">Configure instances</a></li>
<li class="toctree-l2"><a class="reference internal" href="../instances_snapshots/">Create snapshots</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../profiles/">Use profiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../instance-exec/">Run commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../instances_console/">Access the console</a></li>
<li class="toctree-l2"><a class="reference internal" href="../instances_access_files/">Access files</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../explanation/instance_config/">Instance configuration</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../reference/instance_properties/">Instance properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/instance_options/">Instance options</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../reference/devices/">Devices</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../reference/standard_devices/">Standard devices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/devices_none/">Type: <code class="docutils literal notranslate"><span class="pre">none</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/devices_nic/">Type: <code class="docutils literal notranslate"><span class="pre">nic</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/devices_disk/">Type: <code class="docutils literal notranslate"><span class="pre">disk</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/devices_unix_char/">Type: <code class="docutils literal notranslate"><span class="pre">unix-char</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/devices_unix_block/">Type: <code class="docutils literal notranslate"><span class="pre">unix-block</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/devices_usb/">Type: <code class="docutils literal notranslate"><span class="pre">usb</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/devices_gpu/">Type: <code class="docutils literal notranslate"><span class="pre">gpu</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/devices_infiniband/">Type: <code class="docutils literal notranslate"><span class="pre">infiniband</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/devices_proxy/">Type: <code class="docutils literal notranslate"><span class="pre">proxy</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/devices_unix_hotplug/">Type: <code class="docutils literal notranslate"><span class="pre">unix-hotplug</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/devices_tpm/">Type: <code class="docutils literal notranslate"><span class="pre">tpm</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/devices_pci/">Type: <code class="docutils literal notranslate"><span class="pre">pci</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/instance_units/">Units for storage and network limits</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../images/">Images</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../architectures/">Architectures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cloud-init/">Cloud-init</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../image-handling/">Handling</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../storage/">Storage</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../explanation/storage/">About storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../storage_pools/">Manage pools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../storage_create_instance/">Create an instance in a pool</a></li>
<li class="toctree-l2"><a class="reference internal" href="../storage_volumes/">Manage volumes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../storage_move_volume/">Move or copy a volume</a></li>
<li class="toctree-l2"><a class="reference internal" href="../storage_backup_volume/">Back up a volume</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../reference/storage_drivers/">Storage drivers</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../reference/storage_dir/">Directory - <code class="docutils literal notranslate"><span class="pre">dir</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/storage_btrfs/">Btrfs - <code class="docutils literal notranslate"><span class="pre">btrfs</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/storage_lvm/">LVM - <code class="docutils literal notranslate"><span class="pre">lvm</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/storage_zfs/">ZFS - <code class="docutils literal notranslate"><span class="pre">zfs</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/storage_ceph/">Ceph RBD - <code class="docutils literal notranslate"><span class="pre">ceph</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/storage_cephfs/">CephFS - <code class="docutils literal notranslate"><span class="pre">cephfs</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../../networks/">Networking</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../explanation/networks/">About networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../network_create/">Create and configure a network</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Configure network ACLs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../network_forwards/">Configure network forwards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../network_zones/">Configure network zones</a></li>
<li class="toctree-l2"><a class="reference internal" href="../network_bgp/">Configure LXD as BGP server</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../reference/network_bridge/">Bridge network</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../network_bridge_resolved/">Integrate with resolved</a></li>
<li class="toctree-l3"><a class="reference internal" href="../network_bridge_firewalld/">Configure your firewall</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../reference/network_ovn/">OVN network</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../network_ovn_setup/">Set up OVN</a></li>
<li class="toctree-l3"><a class="reference internal" href="../network_ovn_peers/">Create routing relationships</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../reference/network_external/">External networks</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../reference/network_macvlan/">Macvlan network</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/network_sriov/">SR-IOV network</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/network_physical/">Physical network</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../clustering/">Clustering</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../explanation/clustering/">About clustering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_form/">Form a cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_manage/">Manage a cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_recover/">Recover a cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_manage_instance/">Manage instances</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_config_storage/">Configure storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_config_networks/">Configure networks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_groups/">Set up cluster groups</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/cluster_member_config/">Cluster member configuration</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../operation/">Manage LXD</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../server/">Server configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/">Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../remotes/">Remotes</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../explanation/performance_tuning/">Performance tuning</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../benchmark_performance/">Benchmark performance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../network_increase_bandwidth/">Increase bandwidth</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/server_settings/">Server settings</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../backup/">Backups</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../migration/">Migration</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../move_instances/">Move instances</a></li>
<li class="toctree-l3"><a class="reference internal" href="../import_machines_to_instances/">Import existing machines</a></li>
<li class="toctree-l3"><a class="reference internal" href="../migrate_from_lxc/">Migrate from LXC</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../restapi_landing/">REST API</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../rest-api/">Main API documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/">Main API specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api-extensions/">Main API extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dev-lxd/">Instance API documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../events/">Events API documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../metrics/">Metrics API documentation</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../internals/">Internals &amp; debugging</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../container-environment/">Container environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../daemon-behavior/">Daemon behavior</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../database/">Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../debugging/">Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../environment/">Environment variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../syscall-interception/">System call interception</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../userns-idmap/">User namespace setup</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../external_resources/">External resources</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference external" href="https://github.com/lxc/lxd">Project repository</a></li>
<li class="toctree-l2"><a class="reference external" href="https://images.linuxcontainers.org">Image server</a></li>
</ul>
</li>
</ul>

</div></div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="how-to-configure-network-acls">
<span id="network-acls"></span><h1>How to configure network ACLs<a class="headerlink" href="#how-to-configure-network-acls" title="Permalink to this heading">#</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Network ACLs are available for the <a class="reference internal" href="../../reference/devices_nic/#nic-ovn"><span class="std std-ref">OVN NIC type</span></a>, the <a class="reference internal" href="../../reference/network_ovn/#network-ovn"><span class="std std-ref">OVN network</span></a> and the <a class="reference internal" href="../../reference/network_bridge/#network-bridge"><span class="std std-ref">Bridge network</span></a> (with some exceptions, see <a class="reference internal" href="#network-acls-bridge-limitations"><span class="std std-ref">Bridge limitations</span></a>).</p>
</div>
         <p class="youtube_link">           <a href="https://www.youtube.com/watch?v=mu34G0cX6Io" target="_blank">             <span title="LXD network ACLs - YouTube" class="play_icon">▶</span>             <span title="LXD network ACLs - YouTube">Watch on YouTube</span>           </a>         </p><p>Network <abbr title="Access Control Lists">ACLs</abbr> define traffic rules that allow controlling network access between different instances connected to the same network, and access to and from other networks.</p>
<p>Network ACLs can be assigned directly to the <abbr title="Network Interface Controller">NIC</abbr> of an instance or to a network.
When assigned to a network, the ACL applies to all NICs connected to the network.</p>
<p>The instance NICs that have a particular ACL applied (either explicitly or implicitly through a network) make up a logical group, which can be referenced from other rules as a source or destination.
See <a class="reference internal" href="#network-acls-groups"><span class="std std-ref">ACL groups</span></a> for more information.</p>
<section id="create-an-acl">
<h2>Create an ACL<a class="headerlink" href="#create-an-acl" title="Permalink to this heading">#</a></h2>
<p>Use the following command to create an ACL:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>lxc<span class="w"> </span>network<span class="w"> </span>acl<span class="w"> </span>create<span class="w"> </span>&lt;ACL_name&gt;<span class="w"> </span><span class="o">[</span>configuration_options...<span class="o">]</span>
</pre></div>
</div>
<p>This command creates an ACL without rules.
As a next step, <a class="reference internal" href="#network-acls-rules"><span class="std std-ref">add rules</span></a> to the ACL.</p>
<p>Valid network ACL names must adhere to the following rules:</p>
<ul class="simple">
<li><p>Names must be between 1 and 63 characters long.</p></li>
<li><p>Names must be made up exclusively of letters, numbers and dashes from the ASCII table.</p></li>
<li><p>Names must not start with a digit or a dash.</p></li>
<li><p>Names must not end with a dash.</p></li>
</ul>
<section id="acl-properties">
<h3>ACL properties<a class="headerlink" href="#acl-properties" title="Permalink to this heading">#</a></h3>
<p>ACLs have the following properties:</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Property</p></th>
<th class="head text-left"><p>Type</p></th>
<th class="head text-left"><p>Required</p></th>
<th class="head text-left"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></td>
<td class="text-left"><p>string</p></td>
<td class="text-left"><p>yes</p></td>
<td class="text-left"><p>Unique name of the network ACL in the project</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">description</span></code></p></td>
<td class="text-left"><p>string</p></td>
<td class="text-left"><p>no</p></td>
<td class="text-left"><p>Description of the network ACL</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">ingress</span></code></p></td>
<td class="text-left"><p>rule list</p></td>
<td class="text-left"><p>no</p></td>
<td class="text-left"><p>Ingress traffic rules</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">egress</span></code></p></td>
<td class="text-left"><p>rule list</p></td>
<td class="text-left"><p>no</p></td>
<td class="text-left"><p>Egress traffic rules</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">config</span></code></p></td>
<td class="text-left"><p>string set</p></td>
<td class="text-left"><p>no</p></td>
<td class="text-left"><p>Configuration options as key/value pairs (only <code class="docutils literal notranslate"><span class="pre">user.*</span></code> custom keys supported)</p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
<section id="add-or-remove-rules">
<span id="network-acls-rules"></span><h2>Add or remove rules<a class="headerlink" href="#add-or-remove-rules" title="Permalink to this heading">#</a></h2>
<p>Each ACL contains two lists of rules:</p>
<ul class="simple">
<li><p><em>Ingress</em> rules apply to inbound traffic going towards the NIC.</p></li>
<li><p><em>Egress</em> rules apply to outbound traffic leaving the NIC.</p></li>
</ul>
<p>To add a rule to an ACL, use the following command, where <code class="docutils literal notranslate"><span class="pre">&lt;direction&gt;</span></code> can be either <code class="docutils literal notranslate"><span class="pre">ingress</span></code> or <code class="docutils literal notranslate"><span class="pre">egress</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>lxc<span class="w"> </span>network<span class="w"> </span>acl<span class="w"> </span>rule<span class="w"> </span>add<span class="w"> </span>&lt;ACL_name&gt;<span class="w"> </span>&lt;direction&gt;<span class="w"> </span><span class="o">[</span>properties...<span class="o">]</span>
</pre></div>
</div>
<p>This command adds a rule to the list for the specified direction.</p>
<p>You cannot edit a rule (except if you <a class="reference internal" href="#network-acls-edit"><span class="std std-ref">edit the full ACL</span></a>), but you can delete rules with the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>lxc<span class="w"> </span>network<span class="w"> </span>acl<span class="w"> </span>rule<span class="w"> </span>remove<span class="w"> </span>&lt;ACL_name&gt;<span class="w"> </span>&lt;direction&gt;<span class="w"> </span><span class="o">[</span>properties...<span class="o">]</span>
</pre></div>
</div>
<p>You must either specify all properties needed to uniquely identify a rule or add <code class="docutils literal notranslate"><span class="pre">--force</span></code> to the command to delete all matching rules.</p>
<section id="rule-ordering-and-priorities">
<h3>Rule ordering and priorities<a class="headerlink" href="#rule-ordering-and-priorities" title="Permalink to this heading">#</a></h3>
<p>Rules are provided as lists.
However, the order of the rules in the list is not important and does not affect
filtering.</p>
<p>LXD automatically orders the rules based on the <code class="docutils literal notranslate"><span class="pre">action</span></code> property as follows:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">drop</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">reject</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">allow</span></code></p></li>
<li><p>Automatic default action for any unmatched traffic (defaults to <code class="docutils literal notranslate"><span class="pre">reject</span></code>, see <a class="reference internal" href="#network-acls-defaults"><span class="std std-ref">Configure default actions</span></a>).</p></li>
</ul>
<p>This means that when you apply multiple ACLs to a NIC, there is no need to specify a combined rule ordering.
If one of the rules in the ACLs matches, the action for that rule is taken and no other rules are considered.</p>
</section>
<section id="rule-properties">
<h3>Rule properties<a class="headerlink" href="#rule-properties" title="Permalink to this heading">#</a></h3>
<p>ACL rules have the following properties:</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Property</p></th>
<th class="head text-left"><p>Type</p></th>
<th class="head text-left"><p>Required</p></th>
<th class="head text-left"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">action</span></code></p></td>
<td class="text-left"><p>string</p></td>
<td class="text-left"><p>yes</p></td>
<td class="text-left"><p>Action to take for matching traffic (<code class="docutils literal notranslate"><span class="pre">allow</span></code>, <code class="docutils literal notranslate"><span class="pre">reject</span></code> or <code class="docutils literal notranslate"><span class="pre">drop</span></code>)</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">state</span></code></p></td>
<td class="text-left"><p>string</p></td>
<td class="text-left"><p>yes</p></td>
<td class="text-left"><p>State of the rule (<code class="docutils literal notranslate"><span class="pre">enabled</span></code>, <code class="docutils literal notranslate"><span class="pre">disabled</span></code> or <code class="docutils literal notranslate"><span class="pre">logged</span></code>), defaulting to <code class="docutils literal notranslate"><span class="pre">enabled</span></code> if not specified</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">description</span></code></p></td>
<td class="text-left"><p>string</p></td>
<td class="text-left"><p>no</p></td>
<td class="text-left"><p>Description of the rule</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">source</span></code></p></td>
<td class="text-left"><p>string</p></td>
<td class="text-left"><p>no</p></td>
<td class="text-left"><p>Comma-separated list of CIDR or IP ranges, source subject name selectors (for ingress rules), or empty for any</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">destination</span></code></p></td>
<td class="text-left"><p>string</p></td>
<td class="text-left"><p>no</p></td>
<td class="text-left"><p>Comma-separated list of CIDR or IP ranges, destination subject name selectors (for egress rules), or empty for any</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">protocol</span></code></p></td>
<td class="text-left"><p>string</p></td>
<td class="text-left"><p>no</p></td>
<td class="text-left"><p>Protocol to match (<code class="docutils literal notranslate"><span class="pre">icmp4</span></code>, <code class="docutils literal notranslate"><span class="pre">icmp6</span></code>, <code class="docutils literal notranslate"><span class="pre">tcp</span></code>, <code class="docutils literal notranslate"><span class="pre">udp</span></code>) or empty for any</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">source_port</span></code></p></td>
<td class="text-left"><p>string</p></td>
<td class="text-left"><p>no</p></td>
<td class="text-left"><p>If protocol is <code class="docutils literal notranslate"><span class="pre">udp</span></code> or <code class="docutils literal notranslate"><span class="pre">tcp</span></code>, then a comma-separated list of ports or port ranges (start-end inclusive), or empty for any</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">destination_port</span></code></p></td>
<td class="text-left"><p>string</p></td>
<td class="text-left"><p>no</p></td>
<td class="text-left"><p>If protocol is <code class="docutils literal notranslate"><span class="pre">udp</span></code> or <code class="docutils literal notranslate"><span class="pre">tcp</span></code>, then a comma-separated list of ports or port ranges (start-end inclusive), or empty for any</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">icmp_type</span></code></p></td>
<td class="text-left"><p>string</p></td>
<td class="text-left"><p>no</p></td>
<td class="text-left"><p>If protocol is <code class="docutils literal notranslate"><span class="pre">icmp4</span></code> or <code class="docutils literal notranslate"><span class="pre">icmp6</span></code>, then ICMP type number, or empty for any</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">icmp_code</span></code></p></td>
<td class="text-left"><p>string</p></td>
<td class="text-left"><p>no</p></td>
<td class="text-left"><p>If protocol is <code class="docutils literal notranslate"><span class="pre">icmp4</span></code> or <code class="docutils literal notranslate"><span class="pre">icmp6</span></code>, then ICMP code number, or empty for any</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="use-selectors-in-rules">
<span id="network-acls-selectors"></span><h3>Use selectors in rules<a class="headerlink" href="#use-selectors-in-rules" title="Permalink to this heading">#</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This feature is supported only for the <a class="reference internal" href="../../reference/devices_nic/#nic-ovn"><span class="std std-ref">OVN NIC type</span></a> and the <a class="reference internal" href="../../reference/network_ovn/#network-ovn"><span class="std std-ref">OVN network</span></a>.</p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">source</span></code> field (for ingress rules) and the <code class="docutils literal notranslate"><span class="pre">destination</span></code> field (for egress rules) support using selectors instead of CIDR or IP ranges.</p>
<p>With this method, you can use ACL groups or network selectors to define rules for groups of instances without needing to maintain IP lists or create additional subnets.</p>
<section id="acl-groups">
<span id="network-acls-groups"></span><h4>ACL groups<a class="headerlink" href="#acl-groups" title="Permalink to this heading">#</a></h4>
<p>Instance NICs that are assigned a particular ACL (either explicitly or implicitly through a network) make up a logical port group.</p>
<p>Such ACL groups are called <em>subject name selectors</em>, and they can be referenced with the name of the ACL in other ACL groups.</p>
<p>For example, if you have an ACL with the name <code class="docutils literal notranslate"><span class="pre">foo</span></code>, you can specify the group of instance NICs that are assigned this ACL as source with <code class="docutils literal notranslate"><span class="pre">source=foo</span></code>.</p>
</section>
<section id="network-selectors">
<h4>Network selectors<a class="headerlink" href="#network-selectors" title="Permalink to this heading">#</a></h4>
<p>You can use <em>network subject selectors</em> to define rules based on the network that the traffic is coming from or going to.</p>
<p>There are two special network subject selectors called <code class="docutils literal notranslate"><span class="pre">&#64;internal</span></code> and <code class="docutils literal notranslate"><span class="pre">&#64;external</span></code>.
They represent network local and external traffic, respectively.
For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">source</span><span class="o">=</span>@internal
</pre></div>
</div>
<p>If your network supports <a class="reference internal" href="../network_ovn_peers/"><span class="doc std std-doc">network peers</span></a>, you can reference traffic to or from the peer connection by using a network subject selector in the format <code class="docutils literal notranslate"><span class="pre">&#64;&lt;network_name&gt;/&lt;peer_name&gt;</span></code>.
For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">source</span><span class="o">=</span>@ovn1/mypeer
</pre></div>
</div>
<p>When using a network subject selector, the network that has the ACL applied to it must have the specified peer connection.
Otherwise, the ACL cannot be applied to it.</p>
</section>
</section>
<section id="log-traffic">
<h3>Log traffic<a class="headerlink" href="#log-traffic" title="Permalink to this heading">#</a></h3>
<p>Generally, ACL rules are meant to control the network traffic between instances and networks.
However, you can also use them to log specific network traffic, which can be useful for monitoring, or to test rules before actually enabling them.</p>
<p>To add a rule for logging, create it with the <code class="docutils literal notranslate"><span class="pre">state=logged</span></code> property.
You can then display the log output for all logging rules in the ACL with the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>lxc<span class="w"> </span>network<span class="w"> </span>acl<span class="w"> </span>show-log<span class="w"> </span>&lt;ACL_name&gt;
</pre></div>
</div>
</section>
</section>
<section id="edit-an-acl">
<span id="network-acls-edit"></span><h2>Edit an ACL<a class="headerlink" href="#edit-an-acl" title="Permalink to this heading">#</a></h2>
<p>Use the following command to edit an ACL:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>lxc<span class="w"> </span>network<span class="w"> </span>acl<span class="w"> </span>edit<span class="w"> </span>&lt;ACL_name&gt;
</pre></div>
</div>
<p>This command opens the ACL in YAML format for editing.
You can edit both the ACL configuration and the rules.</p>
</section>
<section id="assign-an-acl">
<h2>Assign an ACL<a class="headerlink" href="#assign-an-acl" title="Permalink to this heading">#</a></h2>
<p>After configuring an ACL, you must assign it to a network or an instance NIC.</p>
<p>To do so, add it to the <code class="docutils literal notranslate"><span class="pre">security.acls</span></code> list of the network or NIC configuration.
For networks, use the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>lxc<span class="w"> </span>network<span class="w"> </span><span class="nb">set</span><span class="w"> </span>&lt;network_name&gt;<span class="w"> </span>security.acls<span class="o">=</span><span class="s2">&quot;&lt;ACL_name&gt;&quot;</span>
</pre></div>
</div>
<p>For instance NICs, use the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>lxc<span class="w"> </span>config<span class="w"> </span>device<span class="w"> </span><span class="nb">set</span><span class="w"> </span>&lt;instance_name&gt;<span class="w"> </span>&lt;device_name&gt;<span class="w"> </span>security.acls<span class="o">=</span><span class="s2">&quot;&lt;ACL_name&gt;&quot;</span>
</pre></div>
</div>
</section>
<section id="configure-default-actions">
<span id="network-acls-defaults"></span><h2>Configure default actions<a class="headerlink" href="#configure-default-actions" title="Permalink to this heading">#</a></h2>
<p>When one or more ACLs are applied to a NIC (either explicitly or implicitly through a network), a default reject rule is added to the NIC.
This rule rejects all traffic that doesn’t match any of the rules in the applied ACLs.</p>
<p>You can change this behavior with the network and NIC level <code class="docutils literal notranslate"><span class="pre">security.acls.default.ingress.action</span></code> and <code class="docutils literal notranslate"><span class="pre">security.acls.default.egress.action</span></code> settings.
The NIC level settings override the network level settings.</p>
<p>For example, to set the default action for inbound traffic to <code class="docutils literal notranslate"><span class="pre">allow</span></code> for all instances connected to a network, use the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>lxc<span class="w"> </span>network<span class="w"> </span><span class="nb">set</span><span class="w"> </span>&lt;network_name&gt;<span class="w"> </span>security.acls.default.ingress.action<span class="o">=</span>allow
</pre></div>
</div>
<p>To configure the same default action for an instance NIC, use the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>lxc<span class="w"> </span>config<span class="w"> </span>device<span class="w"> </span><span class="nb">set</span><span class="w"> </span>&lt;instance_name&gt;<span class="w"> </span>&lt;device_name&gt;<span class="w"> </span>security.acls.default.ingress.action<span class="o">=</span>allow
</pre></div>
</div>
</section>
<section id="bridge-limitations">
<span id="network-acls-bridge-limitations"></span><h2>Bridge limitations<a class="headerlink" href="#bridge-limitations" title="Permalink to this heading">#</a></h2>
<p>When using network ACLs with a bridge network, be aware of the following limitations:</p>
<ul class="simple">
<li><p>Unlike OVN ACLs, bridge ACLs are applied only on the boundary between the bridge and the LXD host.
This means they can only be used to apply network policies for traffic going to or from external networks.
They cannot be used for to create <spellexception>intra-bridge</spellexception> firewalls, thus firewalls that control traffic between instances connected to the same bridge.</p></li>
<li><p><a class="reference internal" href="#network-acls-selectors"><span class="std std-ref">ACL groups and network selectors</span></a> are not supported.</p></li>
<li><p>When using the <code class="docutils literal notranslate"><span class="pre">iptables</span></code> firewall driver, you cannot use IP range subjects (for example, <code class="docutils literal notranslate"><span class="pre">192.168.1.1-192.168.1.10</span></code>).</p></li>
<li><p>Baseline network service rules are added before ACL rules (in their respective INPUT/OUTPUT chains), because we cannot differentiate between INPUT/OUTPUT and FORWARD traffic once we have jumped into the ACL chain.
Because of this, ACL rules cannot be used to block baseline service rules.</p></li>
</ul>
</section>
</section>

        </article>
      </div>
      <footer>
        
   

<div class="related-pages">
  <a class="next-page" href="../network_forwards/">
      <div class="page-info">
        <div class="context">
          <span>Next</span>
        </div>
        <div class="title">How to configure network forwards</div>
      </div>
      <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
    </a>
  <a class="prev-page" href="../network_create/">
      <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
      <div class="page-info">
        <div class="context">
          <span>Previous</span>
        </div>
        
        <div class="title">How to create and configure a network</div>
        
      </div>
    </a>
</div>
<div class="bottom-of-page">
  <div class="left-details">
    <div class="copyright">
        Copyright &#169; 2014-2023 LXD contributors
    </div>

    <div class="last-updated">
      Last updated on Jan 16, 2023</div>
  </div>
  <div class="right-details">

    
    <div class="show-source">
      <a class="muted-link" href="../../_sources/howto/network_acls.md.txt"
         rel="nofollow">Show source</a>
    </div>
    
    <div class="edit-github">
      <a class="muted-link" href="https://github.com/lxc/lxd/edit/master/doc/howto/network_acls.md">Edit on GitHub</a>
    </div>
    

    </div>
  </div>
</div>

      </footer>
    </div>
    <aside class="toc-drawer">
      
<div class="toc-sticky toc-scroll">
   
    <div class="toc-title-container">
      <span class="toc-title">
       Contents
      </span>
    </div>
    <div class="toc-tree-container">
      <div class="toc-tree">
        <ul>
<li><a class="reference internal" href="#">How to configure network ACLs</a><ul>
<li><a class="reference internal" href="#create-an-acl">Create an ACL</a><ul>
<li><a class="reference internal" href="#acl-properties">ACL properties</a></li>
</ul>
</li>
<li><a class="reference internal" href="#add-or-remove-rules">Add or remove rules</a><ul>
<li><a class="reference internal" href="#rule-ordering-and-priorities">Rule ordering and priorities</a></li>
<li><a class="reference internal" href="#rule-properties">Rule properties</a></li>
<li><a class="reference internal" href="#use-selectors-in-rules">Use selectors in rules</a><ul>
<li><a class="reference internal" href="#acl-groups">ACL groups</a></li>
<li><a class="reference internal" href="#network-selectors">Network selectors</a></li>
</ul>
</li>
<li><a class="reference internal" href="#log-traffic">Log traffic</a></li>
</ul>
</li>
<li><a class="reference internal" href="#edit-an-acl">Edit an ACL</a></li>
<li><a class="reference internal" href="#assign-an-acl">Assign an ACL</a></li>
<li><a class="reference internal" href="#configure-default-actions">Configure default actions</a></li>
<li><a class="reference internal" href="#bridge-limitations">Bridge limitations</a></li>
</ul>
</li>
</ul>

      </div>
    </div>
   
    
    <div class="relatedlinks-title-container">
      <span class="relatedlinks-title">
       Related links
      </span>
    </div>
    <div class="relatedlinks-container">
      <div class="relatedlinks">
        
          <ul><li><a href="https://discuss.linuxcontainers.org/t/13223" target="_blank">[LXD] Network ACL logging</a></li></ul>
        
        
      </div>
    </div>
    
  </div>

    </aside>
  </div>
</div><script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/scripts/furo.js"></script>
    <script src="../../_static/header-nav.js"></script>
    <script src="../../_static/version-switcher.js"></script>
    </body>
</html>